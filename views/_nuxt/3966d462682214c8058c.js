(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{191:function(t,e,n){var content=n(217);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(18).default)("642e6c3e",content,!0,{sourceMap:!1})},216:function(t,e,n){"use strict";var l=n(191);n.n(l).a},217:function(t,e,n){(t.exports=n(17)(!1)).push([t.i,".result-qr{padding:70px 10px 10px;height:100vh;font-size:13px;background:#fff}.result-qr table tr td{padding:5px!important;border:2px solid #fff;border-radius:8px}.result-qr table tr td.data{background:#eee;color:#686868}.result-qr table tr td.label{background:#453f41;color:#fff;text-align:center}.result-qr table tr td.label.review{background:#ed5565}.result-qr table tr td.heading-label{background:#cdcdcd;text-align:center}.result-qr table tr td.item-status{color:#fff}.result-qr table tr td.item-status.D{background:#ff7100}.result-qr table tr td.item-status.E{background:red}.result-qr table tr td.item-status.S{background:#ed5565}.item-status{vertical-align:middle!important}button.btn.btn-save.btn-block{background:#453f41;color:#fff}",""])},225:function(t,e,n){"use strict";n.r(e);var l={data:function(){return{item:{},review:{USE_EMP_ID:!1,SERIAL_NO:!1,ASSET_GROUP:!1,ASSET_NO:!1,SAP_ASSET_NO:!1},modalText:"",dueDiligenceSchedule:{},ASSET_TYPE:{N:"노트북",D:"데스크탑",M:"모니터",T:"태블릿",P:"PDA",C:"휴대전화",Z:"기타"},ddUser:{},showListUser:!1,depts:[],selectedDept:0,users:[],assetNo:"",newValue:{USE_EMP_ID:"",SERIAL_NO:"",ASSET_GROUP:"",ASSET_NO:"",SAP_ASSET_NO:""}}},mounted:function(){var t=this;if(localStorage.getItem("user")){var e=JSON.parse(localStorage.getItem("user"));this.ddUser=e.data,this.$axios.post("/hradmin/verifyTokenkey",{token:e.token,adminStatus:e.data.ADMIN_STATUS}).then(function(e){e.data?t.dueDiligenceSchedule=e.data:(t.$notify({duration:2e3,group:"foo",type:"warn",title:"Warning",text:"실사기간 아닙니다"}),t.$router.push("/"))}).catch(function(e){t.$router.push("/login")})}else this.$router.push("/login");localStorage.getItem("assetDetail")?(this.item=JSON.parse(localStorage.getItem("assetDetail")),this.assetNo=this.item.ASSET_NO?this.item.ASSET_NO:this.item.SAP_ASSET_NO):this.$router.push({path:"/check"}),this.item.ASSET_NO&&this.item.SAP_ASSET_NO||(this.item.ASSET_NO&&!this.item.SAP_ASSET_NO?(this.review.SAP_ASSET_NO=!0,this.modalText="Did you find SAP number on sticker?",this.$refs.myModalRef.show()):(this.review.ASSET_NO=!0,this.modalText="Did you find QR Code number on sticker?",this.$refs.myModalRef.show()))},methods:{checkExistence:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SAP_ASSET_NO",data={type:e,assetNo:this.newValue.SAP_ASSET_NO,YEAR:this.dueDiligenceSchedule.YEAR,TRIAL:this.dueDiligenceSchedule.TRIAL};"ASSET_NO"===e&&(data={type:e,assetNo:this.newValue.ASSET_NO,YEAR:this.dueDiligenceSchedule.YEAR,TRIAL:this.dueDiligenceSchedule.TRIAL}),this.$axios.post("/checkExistence",data).then(function(n){n.data&&("ASSET_NO"===e?t.newValue.ASSET_NO="":t.newValue.SAP_ASSET_NO="",t.$notify({duration:2e3,group:"foo",type:"warn",title:"Warning",text:e+" existance"}))}).catch(function(t){return console.log(t)})},isValid:function(t){return!/[~`!#$%\^&*+=\-\[\]\\';,\/{}|\\":<>\?]/g.test(t)},closeModal:function(){this.$refs.myModalRef.hide()},updateUseEmp:function(){var t=this;this.review.USE_EMP_ID=!0,this.$axios.get("getDeptList").then(function(e){t.depts=e.data}).catch(function(t){return console.log(t)})},handleDeptSelect:function(){var t=this;this.showListUser=!0,this.newValue.USE_EMP_ID="",this.$axios.get("getUserList/"+this.selectedDept).then(function(e){t.users=e.data}).catch(function(t){return console.log(t)})},updateDueDiligenceMaster:function(){var t=!0;if(this.review.USE_EMP_ID&&(this.newValue.USE_EMP_ID&&this.newValue.USE_EMP_ID!=this.item.USE_EMP_ID?this.item.USE_EMP_ID=this.newValue.USE_EMP_ID:(this.$notify({duration:2e3,group:"foo",type:"warn",title:"Warning",text:"소유자를 선택하십시오"}),t=!1)),this.review.ASSET_GROUP)if(this.newValue.ASSET_GROUP&&this.newValue.ASSET_GROUP!=this.item.ASSET_GROUP){["N","D","M","T","P","C","Z"].indexOf(this.newValue.ASSET_GROUP)<0?(this.$notify({duration:2e3,group:"foo",type:"warn",title:"Warning",text:"해당 종류는 존재하지 않습니다"}),t=!1):this.item.ASSET_GROUP=this.newValue.ASSET_GROUP}else this.$notify({duration:2e3,group:"foo",type:"warn",title:"Warning",text:"종류를 선택하십시오"}),t=!1;this.review.SERIAL_NO&&(this.newValue.SERIAL_NO&&this.newValue.SERIAL_NO!=this.item.SERIAL_NO?this.isValid(this.newValue.SERIAL_NO)?this.item.SERIAL_NO=this.newValue.SERIAL_NO:(this.$notify({duration:2e3,group:"foo",type:"warn",title:"Warning",text:"특수 문자 포함하면 안 됩니다"}),t=!1):(this.$notify({duration:2e3,group:"foo",type:"warn",title:"Warning",text:"시리얼 번호를 입력하십시오"}),t=!1)),this.review.ASSET_NO&&(this.newValue.ASSET_NO?10==this.newValue.ASSET_NO.length&&"L"==this.newValue.ASSET_NO[0]&&this.isValid(this.newValue.ASSET_NO)?this.item.ASSET_NO=this.newValue.ASSET_NO:(this.$notify({duration:2e3,group:"foo",type:"warn",title:"Warning",text:"자산번호 포맷이 맞지 않습니다 : Lxxxxxxxxxx"}),t=!1):(this.$notify({duration:2e3,group:"foo",type:"warn",title:"Warning",text:"자산 번호를 입력하십시오"}),t=!1)),this.review.SAP_ASSET_NO&&(this.newValue.SAP_ASSET_NO?7==this.newValue.SAP_ASSET_NO.length&&"4"==this.newValue.SAP_ASSET_NO[0]&&"1"==this.newValue.SAP_ASSET_NO[1]&&this.isValid(this.newValue.SAP_ASSET_NO)?this.item.SAP_ASSET_NO=this.newValue.SAP_ASSET_NO:(this.$notify({duration:2e3,group:"foo",type:"warn",title:"Warning",text:"SAP번호 포맷이 맞지 않습니다: 41xxxxx"}),t=!1):(this.$notify({duration:2e3,group:"foo",type:"warn",title:"Warning",text:"SAP번호를 입력하십시오"}),t=!1)),t&&(this.item.DD_EMP_ID=this.ddUser.empDetail.EMP_ID,"A"===this.ddUser.ADMIN_STATUS?this.item.DD_STATUS="D":this.item.DD_STATUS="E",this.item.UPT_EMP_ID=this.ddUser.empDetail.EMP_ID,this.$axios.post("/updateDueDiligenceMaster/",this.item).then(function(t){return console.log(t)}).catch(function(t){return console.log(t)}),this.storeDueDiligenceCheckList())},storeDueDiligenceCheckList:function(){var t=this,e=[],n=this.review.USE_EMP_ID?"N":"Y";e.push({YEAR:this.dueDiligenceSchedule.YEAR,TRIAL:this.dueDiligenceSchedule.TRIAL,ASSET_NO:this.item.ASSET_NO,DD_CHK_TYPE:"USER",CHECK_YN:n,CHECK_NOTE:this.newValue.USE_EMP_ID,userID:this.ddUser.empDetail.EMP_ID});var l=this.review.SERIAL_NO?"N":"Y";e.push({YEAR:this.dueDiligenceSchedule.YEAR,TRIAL:this.dueDiligenceSchedule.TRIAL,ASSET_NO:this.item.ASSET_NO,DD_CHK_TYPE:"SN",CHECK_YN:l,CHECK_NOTE:this.newValue.SERIAL_NO,userID:this.ddUser.empDetail.EMP_ID});var r=this.review.ASSET_GROUP?"N":"Y";e.push({YEAR:this.dueDiligenceSchedule.YEAR,TRIAL:this.dueDiligenceSchedule.TRIAL,ASSET_NO:this.item.ASSET_NO,DD_CHK_TYPE:"ASTT",CHECK_YN:r,CHECK_NOTE:this.newValue.ASSET_GROUP,userID:this.ddUser.empDetail.EMP_ID}),e.forEach(function(e){t.$axios.post("storeDueDiligenceCheckList",e).then(function(t){console.log(t)}).catch(function(t){return console.log(t)})})}}},r=(n(216),n(14)),component=Object(r.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"result-qr"},[n("table",{staticClass:"table"},[n("tr",[n("td",{staticClass:"heading-label",attrs:{width:"110"}},[t._v("임시번호")]),t._v(" "),n("td",{staticClass:"data"},[t._v("임시번호")]),t._v(" "),n("td",{staticClass:"item-status text-center",class:t.item.DD_STATUS,attrs:{rowspan:"3",width:"110"}},[t._v("\n        [상태]\n        "+t._s(t.item.DD_STATUS)+"\n      ")])]),t._v(" "),n("tr",[n("td",{staticClass:"heading-label"},[t._v(" SAP번호 ")]),t._v(" "),n("td",{staticClass:"data"},[t._v(t._s(t.item.SAP_ASSET_NO?t.item.SAP_ASSET_NO:"SAP not found"))])]),t._v(" "),n("tr",[n("td",{staticClass:"heading-label"},[t._v("자산번호")]),t._v(" "),n("td",{staticClass:"data"},[t._v(t._s(t.item.ASSET_NO?t.item.ASSET_NO:"QR not found"))])])]),t._v(" "),n("table",{staticClass:"table"},[n("tr",[n("td",{staticClass:"label",attrs:{width:"110"}},[t._v("소유자 부서 ")]),t._v(" "),n("td",{staticClass:"data"},[t._v(t._s(t.item.useEmpDeptName?t.item.useEmpDeptName:""))])]),t._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"110"}},[t._v("소유자 이름 ")]),t._v(" "),n("td",{staticClass:"data"},[t._v(t._s(t.item.useEmpName?t.item.useEmpName:""))])]),t._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"110"}},[t._v("자산 종류")]),t._v(" "),n("td",{staticClass:"data"},[t._v(t._s(t.ASSET_TYPE[t.item.ASSET_GROUP]))])]),t._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"110"}},[t._v("시리얼 번호")]),t._v(" "),n("td",{staticClass:"data"},[t._v(t._s(t.item.SERIAL_NO))])]),t._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"110"}},[t._v("취득일")]),t._v(" "),n("td",{staticClass:"data"},[t._v(t._s(t.item.GET_DATE))])]),t._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"110"}},[t._v("실사자 부서")]),t._v(" "),n("td",{staticClass:"data"},[t._v(t._s(t.item.ddEmpDeptName?t.item.ddEmpDeptName:""))])]),t._v(" "),n("tr",[n("td",{staticClass:"label",attrs:{width:"110"}},[t._v("실사자 이름")]),t._v(" "),n("td",{staticClass:"data"},[t._v(t._s(t.item.ddEmpName))])])]),t._v(" "),n("table",{staticClass:"table"},[n("tr",[n("td",{staticClass:"label review",attrs:{width:"110"}},[t._v("이상 여부 1")]),t._v(" "),n("td",[t._v("\n        소유자 정보 : \n        "),n("label",[n("input",{attrs:{type:"radio",name:"correct_user",id:"",checked:""},on:{click:function(e){t.review.USE_EMP_ID=!1}}}),t._v(" 일치 ")]),t._v(" "),n("label",[n("input",{attrs:{type:"radio",name:"correct_user",id:""},on:{click:t.updateUseEmp}}),t._v(" 불일치")]),t._v(" "),t.review.USE_EMP_ID?n("div",[n("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedDept,expression:"selectedDept"}],staticClass:"form-control",attrs:{name:"",id:""},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedDept=e.target.multiple?n:n[0]},t.handleDeptSelect]}},[n("option",{attrs:{value:"0"}},[t._v("부서 선택")]),t._v(" "),t._l(t.depts,function(e,l){return n("option",{key:l,domProps:{value:e.DEPT_CD}},[t._v(t._s(e.DEPT_NM))])})],2),t._v(" "),t.showListUser?n("select",{directives:[{name:"model",rawName:"v-model",value:t.newValue.USE_EMP_ID,expression:"newValue.USE_EMP_ID"}],staticClass:"form-control",attrs:{name:"",id:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.newValue,"USE_EMP_ID",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("소유자를 선택하십시오")]),t._v(" "),t._l(t.users,function(e,l){return n("option",{key:l,domProps:{value:e.EMP_ID}},[t._v(t._s(e.EMP_NM))])})],2):t._e()]):t._e()])]),t._v(" "),n("tr",[n("td",{staticClass:"label review",attrs:{width:"110"}},[t._v("이상 여부 2")]),t._v(" "),n("td",[t._v("\n        자산 종류:  \n        "),n("label",[n("input",{attrs:{type:"radio",name:"correct_type",id:"",checked:""},on:{click:function(e){t.review.ASSET_GROUP=!1}}}),t._v(" 일치")]),t._v(" "),n("label",[n("input",{attrs:{type:"radio",name:"correct_type",id:""},on:{click:function(e){t.review.ASSET_GROUP=!0}}}),t._v(" 불일치")]),t._v(" "),t.review.ASSET_GROUP?n("div",[n("select",{directives:[{name:"model",rawName:"v-model",value:t.newValue.ASSET_GROUP,expression:"newValue.ASSET_GROUP"}],staticClass:"form-control",attrs:{name:"",id:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.newValue,"ASSET_GROUP",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("종류를 선택하십시오")]),t._v(" "),n("option",{attrs:{value:"N"}},[t._v("노트북")]),t._v(" "),n("option",{attrs:{value:"D"}},[t._v("데스크탑")]),t._v(" "),n("option",{attrs:{value:"M"}},[t._v("모니터")]),t._v(" "),n("option",{attrs:{value:"T"}},[t._v("태블릿")]),t._v(" "),n("option",{attrs:{value:"P"}},[t._v("PDA")]),t._v(" "),n("option",{attrs:{value:"C"}},[t._v("휴대전화")]),t._v(" "),n("option",{attrs:{value:"Z"}},[t._v("기타")])])]):t._e()])]),t._v(" "),n("tr",[n("td",{staticClass:"label review",attrs:{width:"110"}},[t._v("이상 여부 3")]),t._v(" "),n("td",[t._v("\n        시리얼 번호: \n        "),n("label",[n("input",{attrs:{type:"radio",name:"correct_serial",id:"",checked:""},on:{click:function(e){t.review.SERIAL_NO=!1}}}),t._v(" 일치")]),t._v(" "),n("label",[n("input",{attrs:{type:"radio",name:"correct_serial",id:""},on:{click:function(e){t.review.SERIAL_NO=!0}}}),t._v(" 불일치")]),t._v(" "),t.review.SERIAL_NO?n("input",{directives:[{name:"model",rawName:"v-model",value:t.newValue.SERIAL_NO,expression:"newValue.SERIAL_NO"}],staticClass:"form-control",attrs:{type:"text",placeholder:"시리얼 번호를 입력하십시오"},domProps:{value:t.newValue.SERIAL_NO},on:{input:function(e){e.target.composing||t.$set(t.newValue,"SERIAL_NO",e.target.value)}}}):t._e()])]),t._v(" "),t.item.SAP_ASSET_NO?t._e():n("tr",[n("td",{staticClass:"label review",attrs:{width:"110"}},[t._v("SAP번호")]),t._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newValue.SAP_ASSET_NO,expression:"newValue.SAP_ASSET_NO"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter SAP code"},domProps:{value:t.newValue.SAP_ASSET_NO},on:{input:function(e){e.target.composing||t.$set(t.newValue,"SAP_ASSET_NO",e.target.value)}}})])]),t._v(" "),t.item.ASSET_NO?t._e():n("tr",[n("td",{staticClass:"label review",attrs:{width:"110"}},[t._v("자산번호")]),t._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newValue.ASSET_NO,expression:"newValue.ASSET_NO"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter QR code"},domProps:{value:t.newValue.ASSET_NO},on:{change:function(e){return t.checkExistence("ASSET_NO")},input:function(e){e.target.composing||t.$set(t.newValue,"ASSET_NO",e.target.value)}}})])])]),t._v(" "),n("button",{staticClass:"btn btn-save btn-block",on:{click:function(e){return e.preventDefault(),t.updateDueDiligenceMaster(e)}}},[t._v("저장")]),t._v(" "),n("b-modal",{ref:"myModalRef",attrs:{id:"modal1",title:"Check for stickers"}},[n("p",{staticClass:"my-4",domProps:{textContent:t._s(t.modalText)}}),t._v(" "),n("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[n("b-btn",{attrs:{size:"sm",variant:"info"},on:{click:t.closeModal}},[t._v("\n         Yes\n       ")]),t._v(" "),n("b-btn",{attrs:{size:"sm",variant:"primary"},on:{click:t.closeModal}},[t._v("\n         No\n       ")])],1)])],1)},[],!1,null,null,null);e.default=component.exports}}]);